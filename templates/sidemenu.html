<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sidemenu</title>
    <script src="https://kit.fontawesome.com/9fe3d1bfff.js" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/9fe3d1bfff.js" crossorigin="anonymous"></script>
    
    <link rel="stylesheet" href="{{ url_for('static', filename='sidemenu.css') }}">
    
</head>
<body>
    <div class="side_menu"> 
        <div class="d-flex flex-column flex-shrink-0 bg-body-tertiary" style="width:6rem; position: fixed;" >
          <div style="background-color: white;flex-grow: 1;" >
            <a href="" class="  link-body-emphasis text-decoration-none"  data-bs-toggle="tooltip" data-bs-placement="right" style="text-align: left;margin-bottom: 2rem!important;">
              <img src="https://www.qaoncloud.com/public/assets/wp/wp-content/uploads/elementor/thumbs/QAonCloud.svg" style="width:6rem;">
              <span class="visually-hidden"></span>
            </a>
          </div>
          <ul class="nav nav-pills nav-flush flex-column mb-auto text-center" style="height:86vh; margin-top:0.5rem;">
            {% if g.user_role == 'admin' %}
              <li class="nav-item">
                <a href="{{ url_for('Home') }}"  class="nav-link active py-3 border-bottom rounded-0" aria-current="page" title="Home" data-bs-toggle="tooltip" data-bs-placement="right">
                  <i class="fa-solid fa-house"></i>
                </a>
              </li>
              
            {% endif %}
            
            {% if g.user_role in ['admin', 'interviewer'] %}
              <li>
                <a href="{{ url_for('dashBoard') }}" class="nav-link py-3 border-bottom rounded-0" title="Dashboard" data-bs-toggle="tooltip" data-bs-placement="right">
                  <i class="fa-solid fa-gauge icons"></i>
                </a>
              </li>
              <li>
                
                <a href="{{ url_for('resume') }}" class="nav-link py-3 border-bottom rounded-0" title="Resume Upload" data-bs-toggle="tooltip" data-bs-placement="right">
                  <img src="https://cdn0.iconfinder.com/data/icons/web-basic-6/30/upload_cv-512.png" style="width:2.1rem; height:2.1rem;">
                </a>
              </li>
              
              <li>
                <a href="{{ url_for('employee') }}" class="nav-link py-3 border-bottom rounded-0" title="Resume management" data-bs-toggle="tooltip" data-bs-placement="right">
                  <img src="data:image/png;base64,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" style="width:1.6rem; height:1.7rem;">
                </a>
              </li>
            {% endif %}  
            {% if g.user_role == 'admin' %}
              <li>
                <a href="{{ url_for('employeeData') }}" class="nav-link py-3 border-bottom rounded-0" title="Employee data" data-bs-toggle="tooltip" data-bs-placement="right">
                  <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQd6k6sILZeHjvLzgwLGKQ-XIwTik05gRLGFA&s" style="height:1.7rem;width:1.5rem;">
                </a>
              </li>
              <li>
                <a href="{{ url_for('dmax_upload') }}" class="nav-link py-3 border-bottom rounded-0" title="Dmax_upload" data-bs-toggle="tooltip" data-bs-placement="right">
                  <i class="fa-solid fa-file-excel" style="color: black;font-size: 20px;"></i>
                </a>
              </li>
              <li>
                <a href="{{ url_for('dmax_view') }}" class="nav-link py-3 border-bottom rounded-0" title="Dmax_view" data-bs-toggle="tooltip" data-bs-placement="right">
                  <i class="fa-solid fa-award" style="color: black;font-size: 20px;"></i>
                </a>
              </li>
              <li>
                <a href="{{ url_for('qareq') }}" class="nav-link py-3 border-bottom rounded-0" title="QA Requirements" data-bs-toggle="tooltip" data-bs-placement="right">
                  <i class="fa-solid fa-envelope" style="color: black;font-size: 20px;"></i>
                </a>
              </li>
            {% endif %}
            <li id="admin-menu-item-placeholder"></li>
            <li id="register_menu"></li>
          </ul>
          <div class="dropdown border-top">
            <a href="#" class="d-flex align-items-center justify-content-center p-3 link-body-emphasis text-decoration-none dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fa-regular fa-circle-user"></i>
            </a>
            <ul class="dropdown-menu text-small shadow">
              <li><a class="dropdown-item" href="{{ url_for('signout') }}">Sign out</a></li>
              <li><a class="dropdown-item" href="{{ url_for('profile') }}">Profile</a></li>
            </ul>
            
          </div>
        </div>
      </div>
      <script>
        // Pass the URL dynamically from Flask into the JavaScript variables
        const editConfigUrl = "{{ url_for('edit_config') }}";
        const registerUrl = "{{ url_for('register') }}"; 
        const roleUrl = "{{ url_for('get_role') }}"; 
        function fetchRoleAndRenderMenu() {
            fetch(roleUrl)
            .then(response => response.json())
            .then(data => {
                if (data.role === 'admin') {
                    document.getElementById("admin-menu-item-placeholder").innerHTML = `
                        <a href="${editConfigUrl}" class="nav-link py-3 border-bottom rounded-0" title="Config file" data-bs-toggle="tooltip" data-bs-placement="right" onclick="openConfigFile()">
                            <i class="fa-solid fa-cog icons"></i>
                        </a>`;
                    document.getElementById("register_menu").innerHTML = `
                        <a href="${registerUrl}" class="nav-link py-3 border-bottom rounded-0" title="Register" data-bs-toggle="tooltip" data-bs-placement="right">
                            <i class="fa-solid fa-user-plus icons"></i>
                        </a>`;    
                }
            })
            .catch(error => console.error('Error fetching role:', error));
        }

        function openConfigFile() {
            fetch(editConfigUrl)
            .then(response => {
                if (response.ok) {
                    console.log('Config file opened successfully');
                } else {
                    throw new Error('Failed to open config file');
                }
            })
            .catch(error => {
                console.error('Error opening config file:', error);
            });
        }

        // Call the function to fetch the role and render the menu
        fetchRoleAndRenderMenu();
      </script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>  
      <script src="{{ url_for('static', filename='sidemenu.js') }}"></script>
      
      
</body>
</html>